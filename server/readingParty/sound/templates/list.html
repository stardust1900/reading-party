<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>一分钟读书会</title>	
		{% load staticfiles %}
		<link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet">
		<script src="{% static "js/audio.min.js" %}"></script>
		<script>
		    audiojs.events.ready(function() {
		    var as = audiojs.createAll();
		  });
		</script>
	</head>

	<body>
		<div class="container">
			<h3>一分钟读书会</h3>
	        {% if sounds %}
			<table class="table">
				{% for sound in sounds %}
				<tr>
	                <td>{{forloop.counter}}</td>
	                <td>{{sound.memo}}</td>
	                <td><audio src="{{ sound.soundfile.url }}" preload="auto" /></td>
	                <td>{{sound.reader.username}}</td>
	                <td>{{sound.pubTime|date:"Y-m-d H:i:s"}}</td>
	                <td>
	                	<a href="/sound/toEdit/{{sound.id}}"><span class="glyphicon glyphicon-edit"></span> </a>&nbsp;&nbsp;&nbsp;
	                	<a href="/sound/remove/{{sound.id}}"><span class="glyphicon glyphicon-remove"></span></a>
	                </td>
				</tr>
	            {% endfor %}
			</table>
			<p>
			  {# sounds.paginator.page_range 这个函数返回包含一个所有页码数的 range 对象 #}
			  {# 即 range(1, sounds.paginator.num_pages + 1) #}
			  {% for page_number in sounds.paginator.page_range %}
			    {% ifequal page_number  sounds.number %}
			      <h3>{{ page_number }}</h3>
			    {% else %}
			      <a href="?page={{ page_number }}">{{ page_number }}</a>
			    {% endifequal %}
			  {% endfor %}
			</p>
			{% else %}
				<p>No documents.</p>
			{% endif %}
			<a href="/sound/toUpload" class="btn btn-primary btn-lg active" role="button">添 加</a>
	    </div>
	</body>

</html> 
